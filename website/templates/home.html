{% extends 'base.html' %} {% block content %} {% if user.is_authenticated %}

<div class="container">
  <form method="GET" action="{% url 'home' %}" class="mb-3">
    <input
      type="text"
      name="filter_query"
      value="{{ filter_query }}"
      placeholder="Search..."
      class="form-control"
    />
    <button type="submit" class="btn btn-primary mt-2">Filter</button>
  </form>

  <div class="table-responsive">
    <table class="table table-striped table-hover table-bordered">
      <thead class="table-dark">
        <tr>
          <th scope="col">SR.No</th>
          <th scope="col">Date</th>
          <th scope="col">Challan No</th>
          <th scope="col">Material</th>
          <th scope="col">Weight</th>
          <th scope="col">Quarry</th>
          <th scope="col">Royalty Pass</th>
          <th scope="col">Truck No</th>
          <th scope="col">Site</th>
          <th scope="col">View</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% if records %} {% for record in records %}
        <tr>
          <td><a>{{ record.id }}</a></td>
          <td>{{ record.date }}</td>
          <td>{{ record.challan_no }}</td>
          <td>{{ record.material }}</td>
          <td>{{ record.weight }}</td>
          <td>{{ record.quarry }}</td>
          <td>{{ record.royalty_pass }}</td>
          <td>{{ record.truck_no }}</td>
          <td>{{ record.delivered_at }}</td>
          <td>
            <a href="{% url 'view_invoice' record.id %}"
              ><i class="bi bi-receipt"></i
            ></a>
          </td>
          <td>
            <a href="{% url 'record' record.id %}">
              <button type="button" class="btn btn-warning btn-sm">
                Delete/Update
              </button>
            </a>
          </td>
        </tr>
        {% endfor %} {% else %}
        <tr>
          <td colspan="11" class="text-center">No records found.</td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>

{% else %}

<div class="col-md-6 offset-md-3">
  <h1>Login</h1>
  <br />

  <form method="POST" action="{% url 'home' %}">
    {% csrf_token %}
    <div class="mb-3">
      <input
        type="text"
        class="form-control"
        name="username"
        placeholder="Username"
        required
      />
    </div>
    <br />
    <div class="mb-3">
      <input
        type="password"
        class="form-control"
        name="password"
        placeholder="Password"
        required
      />
    </div>
    <br />
    <button type="submit" class="btn btn-secondary">Login</button>
  </form>

  {% endif %} {% endblock %}
</div>
